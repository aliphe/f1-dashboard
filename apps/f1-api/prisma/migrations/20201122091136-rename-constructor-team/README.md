# Migration `20201122091136-rename-constructor-team`

This migration has been generated by Matthias Alif at 11/22/2020, 10:11:36 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "ConstructorStanding" DROP CONSTRAINT "ConstructorStanding_constructorId_fkey"

ALTER TABLE "ConstructorStanding" DROP CONSTRAINT "ConstructorStanding_seasonYear_fkey"

ALTER TABLE "_ConstructorToSeason" DROP CONSTRAINT "_ConstructorToSeason_A_fkey"

ALTER TABLE "_ConstructorToSeason" DROP CONSTRAINT "_ConstructorToSeason_B_fkey"

CREATE TABLE "Team" (
    "id" TEXT NOT NULL,
    "season" INTEGER NOT NULL,
    "name" TEXT NOT NULL,
    "nationality" TEXT NOT NULL,
    "url" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "TeamStanding" (
    "position" INTEGER NOT NULL,
    "points" INTEGER NOT NULL,
    "wins" INTEGER NOT NULL,
    "seasonYear" INTEGER NOT NULL,
    "teamId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("position")
)

CREATE TABLE "_SeasonToTeam" (
    "A" INTEGER NOT NULL,
    "B" TEXT NOT NULL
)

DROP TABLE "Constructor"

DROP TABLE "ConstructorStanding"

DROP TABLE "_ConstructorToSeason"

CREATE UNIQUE INDEX "_SeasonToTeam_AB_unique" ON "_SeasonToTeam"("A", "B")

CREATE INDEX "_SeasonToTeam_B_index" ON "_SeasonToTeam"("B")

ALTER TABLE "TeamStanding" ADD FOREIGN KEY("seasonYear")REFERENCES "Season"("year") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "TeamStanding" ADD FOREIGN KEY("teamId")REFERENCES "Team"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_SeasonToTeam" ADD FOREIGN KEY("A")REFERENCES "Season"("year") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_SeasonToTeam" ADD FOREIGN KEY("B")REFERENCES "Team"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201121220811-fix-driver..20201122091136-rename-constructor-team
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -25,19 +25,19 @@
   updatedAt      DateTime         @updatedAt
   DriverStanding DriverStanding[]
 }
-model Constructor {
+model Team {
   id          String   @id
   season      Int
   name        String
   nationality String
   url         String
   seasons     Season[]
-  createdAt           DateTime              @default(now())
-  updatedAt           DateTime              @updatedAt
-  ConstructorStanding ConstructorStanding[]
+  createdAt    DateTime       @default(now())
+  updatedAt    DateTime       @updatedAt
+  TeamStanding TeamStanding[]
 }
 model DriverStanding {
   position Int @id
@@ -54,26 +54,26 @@
   updatedAt DateTime @updatedAt
 }
-model ConstructorStanding {
+model TeamStanding {
   position Int @id
   points   Int
   wins     Int
   season     Season @relation(fields: [seasonYear], references: [year])
   seasonYear Int
-  constructor   Constructor @relation(fields: [constructorId], references: [id])
-  constructorId String
+  team   Team   @relation(fields: [teamId], references: [id])
+  teamId String
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
 model Season {
-  year                 Int                   @id
-  drivers              Driver[]
-  constructors         Constructor[]
-  driverStandings      DriverStanding[]
-  constructorStandings ConstructorStanding[]
+  year            Int              @id
+  drivers         Driver[]
+  teams           Team[]
+  driverStandings DriverStanding[]
+  teamStandings   TeamStanding[]
 }
```
