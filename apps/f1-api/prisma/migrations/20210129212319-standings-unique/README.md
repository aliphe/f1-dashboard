# Migration `20210129212319-standings-unique`

This migration has been generated by aliphe at 1/29/2021, 10:23:19 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "DriverStanding" DROP CONSTRAINT "DriverStanding_pkey"

ALTER TABLE "TeamStanding" DROP CONSTRAINT "TeamStanding_pkey"

CREATE UNIQUE INDEX "DriverStanding.position_seasonYear_unique" ON "DriverStanding"("position", "seasonYear")

CREATE UNIQUE INDEX "TeamStanding.position_seasonYear_unique" ON "TeamStanding"("position", "seasonYear")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201124075640-raceresult-time-optional..20210129212319-standings-unique
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -53,11 +53,11 @@
 }
 model Race {
   round      Int
-  seasonYear Int
   name       String
   season     Season       @relation(fields: [seasonYear], references: [year])
+  seasonYear Int
   circuitId  String
   circuit    Circuit      @relation(fields: [circuitId], references: [id])
   date       DateTime
   url        String
@@ -93,9 +93,9 @@
   @@unique([position, raceRound, raceSeasonYear])
 }
 model DriverStanding {
-  position Int @id
+  position Int
   points   Int
   wins     Int
   season     Season @relation(fields: [seasonYear], references: [year])
@@ -103,15 +103,16 @@
   driver   Driver @relation(fields: [driverId], references: [id])
   driverId String
+  @@unique([position, seasonYear])
+
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
-
 }
 model TeamStanding {
-  position Int @id
+  position Int
   points   Int
   wins     Int
   season     Season @relation(fields: [seasonYear], references: [year])
@@ -119,8 +120,10 @@
   team   Team   @relation(fields: [teamId], references: [id])
   teamId String
+  @@unique([position, seasonYear])
+
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
```
